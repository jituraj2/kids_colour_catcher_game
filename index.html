<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kids Color Catcher Game</title>
  <style>
    body {
      margin: 0;
      background: #f2f8ff;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: Arial, sans-serif;
    }
    canvas {
      background: #fff;
      border: 3px solid #333;
      margin-top: 10px;
      max-width: 100%;
      height: auto;
    }
    #controls {
      margin-top: 10px;
      display: flex;
      gap: 10px;
    }
    button {
      padding: 10px 20px;
      font-size: 18px;
      border-radius: 8px;
      border: none;
      background: #4CAF50;
      color: white;
      cursor: pointer;
    }
    button:hover { background: #45a049; }
    #hud {
      display: flex;
      justify-content: space-between;
      width: 520px;
      max-width: 100%;
      margin-top: 10px;
      font-size: 18px;
    }
    /* üîî Popup Styles */
    #popup {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    #popupContent {
      background: #fff;
      padding: 25px;
      border-radius: 12px;
      width: 320px;
      text-align: center;
      font-size: 16px;
      box-shadow: 0px 6px 16px rgba(0,0,0,0.3);
      animation: fadeIn 0.4s ease;
    }
    #popupContent h3 {
      margin-top: 0;
      color: #333;
    }
    #closePopup {
      margin-top: 15px;
      padding: 8px 16px;
      background: #4CAF50;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
    }
    #closePopup:hover { background: #45a049; }
    @keyframes fadeIn {
      from {opacity:0; transform: scale(0.9);}
      to {opacity:1; transform: scale(1);}
    }
  </style>
</head>
<body>

  <!-- Popup Instructions -->
  <div id="popup">
    <div id="popupContent">
      <h3>üéÆ How to Play</h3>
      <p>Move the basket left or right to catch the <b>correct color</b> shown in "Catch".</p>
      <p>‚úÖ Correct color = Score points<br>‚ùå Wrong color = Game Over</p>
      <button id="closePopup">Close</button>
    </div>
  </div>

  <div id="hud">
    <p id="target">Catch: <b>---</b></p>
    <p id="score">Score: 0</p>
  </div>

  <canvas id="gameCanvas" width="500" height="500"></canvas>

  <div id="controls">
    <button onclick="startGame()">Start</button>
    <button onclick="pauseGame()">Pause</button>
  </div>

<script>
  // Popup close
  document.getElementById("closePopup").onclick = () => {
    document.getElementById("popup").style.display = "none";
  };

  // üé® Game setup
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");
  let basket = { x: 220, y: 460, w: 60, h: 20, color: "black" };
  let drops = [];
  let colors = [
    { name: "Red", code: "red" },
    { name: "Blue", code: "blue" },
    { name: "Green", code: "green" },
    { name: "Yellow", code: "yellow" }
  ];
  let targetColor, score = 0, gameRunning = false, gameInterval;

  function pickTarget() {
    targetColor = colors[Math.floor(Math.random() * colors.length)];
    document.getElementById("target").innerHTML = 
      `Catch: <b>${targetColor.name}</b> 
       <span style="
         display:inline-block;width:20px;height:20px;
         border-radius:50%;background:${targetColor.code};
         margin-left:6px;border:1px solid #333;"></span>`;
  }

  function startGame() {
    if (gameRunning) return;
    score = 0;
    drops = [];
    pickTarget();
    document.getElementById("score").innerText = "Score: 0";
    gameRunning = true;
    gameInterval = setInterval(gameLoop, 30);
  }

  function pauseGame() {
    gameRunning = false;
    clearInterval(gameInterval);
  }

  function gameLoop() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = basket.color;
    ctx.fillRect(basket.x, basket.y, basket.w, basket.h);

    if (Math.random() < 0.03) {
      let color = colors[Math.floor(Math.random()*colors.length)];
      drops.push({x:Math.random()*480,y:0,color:color});
    }

    for (let i=0;i<drops.length;i++) {
      let d = drops[i];
      ctx.beginPath();
      ctx.arc(d.x,d.y,12,0,Math.PI*2);
      ctx.fillStyle = d.color.code;
      ctx.fill();
      d.y += 2;

      if (d.y > basket.y && d.x > basket.x && d.x < basket.x+basket.w) {
        if (d.color.name === targetColor.name) {
          score++;
          document.getElementById("score").innerText = "Score: " + score;
          pickTarget();
        } else {
          alert("Game Over! Final Score: " + score);
          pauseGame();
        }
        drops.splice(i,1);
      }
    }
  }

  // Keyboard move
  document.addEventListener("keydown",(e)=>{
    if(e.key==="ArrowLeft" && basket.x>0) basket.x-=20;
    if(e.key==="ArrowRight" && basket.x<canvas.width-basket.w) basket.x+=20;
  });
</script>
</body>
</html>
